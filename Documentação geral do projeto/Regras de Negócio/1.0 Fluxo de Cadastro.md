# üìå Regras de Neg√≥cio ‚Äì Fluxo de Cadastro ConectaBem

## 1. Cadastro via Provedores (Google / Facebook)
- O sistema deve permitir autentica√ß√£o apenas atrav√©s de contas v√°lidas do Google ou Facebook.  
- O sistema deve validar a permiss√£o do usu√°rio para compartilhar os dados b√°sicos (nome, e-mail).  
- Se o usu√°rio n√£o conceder permiss√£o, o cadastro n√£o poder√° ser conclu√≠do.  
- Ap√≥s autentica√ß√£o bem-sucedida, o usu√°rio deve obrigatoriamente selecionar o perfil (‚ÄúPaciente‚Äù ou ‚ÄúM√©dico‚Äù) antes de prosseguir.  

---

## 2. Cadastro via E-mail
- O sistema deve validar o formato do e-mail antes de permitir a continua√ß√£o do cadastro.
    ### 2.1 Validade do C√≥digo
  - O sistema deve enviar um c√≥digo de valida√ß√£o ao e-mail informado.  
  - Ser√° mostrada uma  mensagem com o tempo m√°ximo de validade do c√≥digo de verifica√ß√£o
    - Dever√° ser exibida em contagem regressiva de segundos.
  - Cada novo c√≥digo gerado deve invalidar o anterior.
  - A Contagem de 30 minutos (?) deve reiniciar a cada reenvio.
  - T√≠tulo e texto da P√°gina devem fornecer feedback para o usu√°rio de que um novo c√≥digo foi enviado e o antigo foi invalidado, assim como o tempo de expira√ß√£o do novo c√≥digo e o de reenvio de novo c√≥digo devem recome√ßar a contagem.
  - O Bot√£o de reenviar c√≥digo deve estar disponivel pela primeira vez ap√≥s 60 segundos
  - Durante a valida√ß√£o do c√≥digo fornecido o link de reenviar c√≥digo e o bot√£o de validar devem ficar desabilitados, O CTA deve exibir a mensagem "Validando". 
  - Reenviar o c√≥digo tem o limite de 5 tentativas por hora
  - Caso existe um erro a mensagem de erro √© aplicado ao bloco inteiro mudando de cor o texto e os inputs para vermelho.
    - Inputs vazios - Mensagem de Erro correspondente "Preencha todos os campos para continuar".
    - C√≥digo Incorreto - Mensagem de Erro correspondente "Preencha corretamente ou reenvie o c√≥ digo e tente novamente".  
- O cadastro s√≥ poder√° prosseguir ap√≥s a valida√ß√£o correta do c√≥digo.  
- Caso o c√≥digo seja inv√°lido ou expirado, o sistema deve solicitar um novo envio.  

---

## 3. Dados Obrigat√≥rios
- O sistema deve exigir o preenchimento de todos os campos obrigat√≥rios (ex.: nome completo, data de nascimento, g√™nero, cidade, CEP).
  - Ao inserir o CEP o sistema dever√° efetuar a valida√ß√£o do CEP digitado
  - Ao clicar no link "Busca CEP" a p√°gina exibida dever√° ser a p√°gina de busca de CEP dos correios. 
- Usu√°rios do perfil **Paciente** devem preencher tamb√©m prefer√™ncias de atendimento e acessibilidade.  
- Usu√°rios do perfil **M√©dico** devem preencher especialidades, registro profissional e disponibilidade.  
- Em caso de dados que n√£o foram preenchidos ou preenchidos incorretamente, o label, caixa, ficar√£o vermelhos, com um texto de apoio em baixo 
- O cadastro n√£o pode ser conclu√≠do se algum campo obrigat√≥rio estiver em branco.  

---

## 4. Fluxo de Conclus√£o
- O cadastro s√≥ ser√° considerado conclu√≠do quando todos os dados obrigat√≥rios forem validados.  
- Ap√≥s a conclus√£o, o usu√°rio deve ser automaticamente redirecionado para a Home autenticado.  
- O sistema deve registrar a data e hora da cria√ß√£o do cadastro.  

---

## 5. Restri√ß√µes e Valida√ß√µes Gerais
- N√£o √© permitido cadastrar o mesmo e-mail mais de uma vez.  
- Perfis diferentes (Paciente e M√©dico) n√£o podem compartilhar o mesmo e-mail.  
- O sistema deve exibir mensagens claras em caso de erro (ex.: e-mail j√° cadastrado, c√≥digo inv√°lido, falta de conex√£o).  
- Em caso de falha de conex√£o durante o cadastro, o processo deve ser interrompido e o usu√°rio informado para tentar novamente.  

--- 

### Legenda
? - Dever√° ser discutido e possivel de ser revisto
